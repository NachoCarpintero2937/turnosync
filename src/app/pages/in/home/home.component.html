<div class="container mt-5">
    <app-info-cards [data]="shifts"></app-info-cards>
    <div class="col-md-12 mt-5">
        <mat-card>
            <mat-card-header>
                <span class="title-service">
                    Servicios a prestar hoy
                </span>
            </mat-card-header>
            <mat-card-content>
                <mat-list *ngIf="shifts?.today_service.length >0;else noServiceToday">
                    <div *ngFor="let serviceToday of shifts?.today_service">
                        <mat-list-item lines="">
                            <div class="d-flex list-shifts">
                                <div class="description">
                                    <span class="description-servicetoday">
                                        {{serviceToday?.name}}
                                    </span>
                                    <div class="bagde-count">
                                        {{serviceToday?.count}}
                                    </div>
                                </div>
                                <div class="price">
                                    {{ serviceToday?.price?.price | currency:'$':'symbol':'1.2-2' }}
                                </div>
                            </div>
                        </mat-list-item>
                        <mat-divider></mat-divider>
                    </div>
                </mat-list>
                <ng-template #noServiceToday>
                    <div class="mt-3 pd-3 m-3">
                        Sin servicios a prestar hoy
                        <mat-divider></mat-divider>
                    </div>
                </ng-template>
            </mat-card-content>
        </mat-card>
    </div>
    <!-- employees -->
    <div class="mt-1 d-flex justify-content-center">
        <mat-card class="col-md-6 employees" *ngFor="let employe of shifts?.users">
            <mat-card-header>
                <span>
                    {{employe?.name}} ({{employe?.shifts.length}})
                </span>
            </mat-card-header>
            <mat-card-content>
                <mat-list role="list" *ngIf="employe?.shifts?.length >0;else notShifts">
                    <div *ngFor="let shift of employe?.shifts" [ngClass]="{'show' : shift?.status == 1  ? true : false , 'pending': shift?.status == 0 ? true : false , 'no-show' : shift?.status == 2 }">
                        <mat-list-item lines="">
                            <div class="d-flex list-shifts">
                                <div class="description" [matTooltip]="getTootlip(shift)">
                                    <b>{{ shift?.date_shift | date:'HH:mm' }}</b>
                                    <span>
                                        {{shift?.service?.name}}
                                    </span>
                                    <span>
                                        <b>{{shift?.client?.name}}</b>
                                    </span>

                                </div>
                                <div class="actions">
                                    <button class="btn-action" *ngIf="shift?.status ==0" (click)="changeStatus(shift,1)">
                                        <span class="material-icons"  >done</span>
                                    </button>
                                    <button class="btn-action" *ngIf="shift?.status ==0" (click)="changeStatus(shift,2)">
                                        <span class="material-icons" >close</span>
                                    </button>
                                    <button class="btn-action" (click)="sendWsp(shift)"><img src="./assets/img/wsp.png"
                                            alt="" width="20"></button>
                                    <button class="btn-action"[routerLink]="['/in/shifts/view-shift']" [queryParams]="{id: shift?.id}"> <span class="material-icons" >visibility</span></button>
                                </div>
                            </div>
                        </mat-list-item>
                        <mat-divider></mat-divider>
                    </div>
                </mat-list>
            </mat-card-content>
        </mat-card>
        <ng-template #notShifts>
            <div class="d-flex justify-content-center align-items-center ">
                <mat-list class="col-md-12">
                    <mat-list-item>
                        Sin turnos disponibles hoy
                    </mat-list-item>
                    <mat-divider></mat-divider>
                </mat-list>
            </div>
        </ng-template>
    </div>

</div>

<div class="add_work">
    <div class="float-buttons">
        <button mat-fab (click)="createUrl();" [disabled]="submitUrl"><span class="material-icons text-white">share</span></button>
        <button mat-fab (click)="addShift();" *ngIf="date"><span class="material-icons text-white">add</span></button>
    </div>
</div>